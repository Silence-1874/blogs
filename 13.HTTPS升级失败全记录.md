不知为啥，别人经常进不去我的网站，但我自己是从没出现过问题的。有些进不去网站的原因是浏览器自动拦截了非HTTPS的网站，于是一直想给自己的网站升级个HTTPS，前前后后折腾了半个多月，最后还是放弃了。

在升级HTTPS前，恶补了很多关于HTTPS的知识。

首先，在华为云上申领了免费的一年SSL证书，然后一路填写信息，填完之后提示要域名验证。

领的免费的证书是 **DV(Basic)** 类型的，只能通过DNS验证来进行域名验证。

按着[官方的说明](https://support.huaweicloud.com/ccm_faq/ccm_01_0268.html)，在DNS解析处添加了一条用于域名验证的TXT记录，一切都很顺利。

可是接下来，自我检查域名验证信息时，却出了问题。

我按着官方的说明，在DOS窗口下输入:

```
nslookup -q=TXT _dnsauth.silence88.top
```

并没有出现之前填写的txt记录，取而代之的是是一系列时间的参数。我试着将域名替换成其他的，结果返回的信息是一模一样的:

![](https://s2.loli.net/2022/06/15/fgu4ZLoUMeGvTS7.png)

而正常情况下应该是这样的:

![](https://s2.loli.net/2022/06/15/62x5oFRzEfNjBeI.png)

后来注意到一句话，说是要到域名托管平台下设置才有效。

我的域名是在买服务器前就注册了的，是在**易名**上注册的，而华为云的域名服务是与**新网**合作的。

于是我又到易名的DNS解析服务里添加了相应的TXT记录，可还是没用。

后来又尝试了很多方法，仍然是不起效。期末也比较忙，于是就先搁置了。

过了一个多星期，稍微有点空闲时间了，再次来研究域名验证。

早知道最开始就在华为这注册域名了，现在搞得这么麻烦。

突然想到，要不我干脆就把域名迁移到华为云DNS吧。于是按着[官方的说明](https://support.huaweicloud.com/dns_faq/dns_faq_001.html)，捣鼓了好久，也不知道算不算成功了。

撤回了之前的申请，重开了一次申请。这次申请完之后直接显示“十分钟后将签发证书”，迁移到华为云DNS后果然快多了。没过一会儿就成功签发了。

![](https://s2.loli.net/2022/06/15/EkFUhHuWyI5gdx2.png)

拿到证书后，我选择在Nginx上部署，跟着[官方教程](https://support.huaweicloud.com/usermanual-ccm/ccm_01_0082.html)一步步做下来，畅通无阻，可到最后，用https访问我的域名时，却无法连接上。

![](https://s2.loli.net/2022/06/15/TMlEJPaoU5xdArD.png)

即使换其他的浏览器也无济于事，就是无法连接上网站，但是用http是可以正常访问的。

花了好多好多时间，几乎把网上能找到的方法全都试了一遍，依然没用。大部分都说是端口443没开放的原因，可我明明已经打开了443端口。

想到或许是端口被占用了，输入命令查看:

![](https://s2.loli.net/2022/06/15/hAMdksmuYBEITbR.png)

确实是有个叫**hostguard**的东西占着443端口，也不知道是不是这个的原因。可当我kill这个进程后，它又会自己重启，依然占着443端口。

网上查了下hostguard，相关信息很少，好像说是华为云自己的一个什么服务进程。

最后，发现一篇文章：[“阿里云ECS香港服务器HTTPS无法访问”问题追查记录](https://vimsky.com/article/3896.html)，跟我遇到的情况很像，只好认为是香港服务器本身的问题了。

至此，我终于放弃了，姑且用着这http吧。

白白领了一个证书，已经绑定了域名，也没法转让，只能浪费了。

![](https://s2.loli.net/2022/06/15/1I9ykglDxUMaR8n.png)

以后可以研究研究这证书。
